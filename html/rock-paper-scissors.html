<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="shortcut icon" href="/images/_787cc33a-0c16-4ffd-8336-7d107a68af35.jfif" type="image/x-icon">
        <link rel="stylesheet" href="/assets/fontawesome-free-6.5.1-web/css/all.min.css">
        <link rel="stylesheet" href="/css/style.css">
        <title>rock-paper-scissors</title>
    </head>
    <body>
       <div><i class="fa-solid fa-toggle-off js-toggle"></i></div>
        <p class="title">Rock Paper Scissors</p>
        <button onclick="
        playGame('Rock');
        " class="rps-button js-button-toggle"><img src="/images/rock-emoji.jpg" class="image-resize" alt=""></button>

        <button onclick="
        playGame('Paper');
        " class="rps-button js-button-toggle"><img src="/images/paper-emoji.jpg" class="image-resize" alt=""></button>

        <button onclick="
        playGame('Scissors');
        " class="rps-button js-button-toggle"><img src="/images/scissors-emoji.jpg" class="image-resize" alt=""></button>

        <p class="js-result show-result-moves"></p>
        <p class="js-moves show-result-moves"></p>
        <p class="js-score show-score"></p>

        <button class="reset-button js-reset-score" onclick="
        score ={
            wins:0,
            losses:0,
            ties:0
        }
        localStorage.removeItem('score');
        updateScore();
        ">Reset Score</button>


        <script>
            let score = JSON.parse(localStorage.getItem('score')) || {
                wins:0,
                losses:0,
                ties:0
            }

           
           updateScore();


            function playGame(playerMove){
                let computerMove = pickComputerMove();

                let result;
                if(computerMove === 'Rock'){
                    if(playerMove === 'Rock'){
                        result = 'Tie'
                    }else if(playerMove === 'Paper'){
                        result = 'You win!'
                    }else if(playerMove === 'Scissors'){
                        result = 'You lost!'
                    }
                }else if(computerMove === 'Paper'){
                    if(playerMove === 'Rock'){
                        result = 'You lost!'
                    }else if(playerMove === 'Paper'){
                        result = 'Tie'
                    }else if(playerMove === 'Scissors'){
                        result = 'You win!'
                    }
                }else if(computerMove === 'Scissors'){
                    if(playerMove === 'Rock'){
                        result = 'You win!'
                    }else if(playerMove === 'Paper'){
                        result = 'You lost!'
                    }else if(playerMove === 'Scissors'){
                        result = 'Tie'
                    }   
                }

                if(result === 'You win!'){
                    score.wins++;
                }else if(result === 'You lost!'){
                    score.losses ++;
                }else{
                    score.ties ++;
                }

                localStorage.setItem('score',JSON.stringify(score)); 
                
                updateScore();

                document.querySelector('.js-result').innerHTML = result;
                document.querySelector('.js-moves').innerHTML = `You : <img src="/images/${playerMove}-emoji.jpg" class="image-resize" alt="">
                - compter : <img src="/images/${computerMove}-emoji.jpg" class="image-resize" alt="">`;
                

//                 alert(`you picked ${playerMove}, computer picked ${computerMove}, ${result}
// wins:${score.wins},losses:${score.losses},Ties:${score.ties}`);
                
            }

            function updateScore(){
                document.querySelector('.js-score')
                    .innerHTML = `wins:${score.wins},losses:${score.losses},Ties:${score.ties}`
            }

                  

            function pickComputerMove(){
                let createRandomNumber = Math.random();

                let computerMove;

                if(createRandomNumber >= 0 && createRandomNumber < 1 / 3){
                    computerMove = 'Rock';
                }else if(createRandomNumber >= 1 / 3 && createRandomNumber < 2 / 3){
                    computerMove = 'Paper'
                }else if(createRandomNumber >= 2 / 3 && createRandomNumber < 1){
                    computerMove = 'Scissors';
                }
                return computerMove;
            }


            
           let buttonToggleElement = document.querySelectorAll('.js-button-toggle');
           console.log(buttonToggleElement);

            let toggleElement = document.querySelector('.js-toggle');

            let ressetElement = document.querySelector('.js-reset-score');

            let isToggle = false;
            
            toggleElement.onclick = function(){
                if(!isToggle){
                    document.body.classList.add('is-toggle');
                    this.classList.remove('fa-toggle-off');
                    this.classList.add('fa-toggle-on');
                    this.classList.add('i-toggle');
                    for (const toggle of buttonToggleElement) {
                        toggle.classList.remove('rps-button');
                        toggle.classList.add('rps-button-toggle');
                    }
                    ressetElement.classList.remove('reset-button');
                    ressetElement.classList.add('rest-button-toggle');
                    isToggle = true;
                }else{
                    document.body.classList.remove('is-toggle');
                    this.classList.remove('fa-toggle-on');
                    this.classList.add('fa-toggle-off');
                    this.classList.remove('i-toggle');
                    for (const toggle of buttonToggleElement) {
                        toggle.classList.remove('rps-button-toggle');
                        toggle.classList.add('rps-button');
                    }
                    ressetElement.classList.remove('rest-button-toggle');
                    ressetElement.classList.add('reset-button');
                    isToggle = false;
                }
            }
            
        </script>
        
    </body>
</html>